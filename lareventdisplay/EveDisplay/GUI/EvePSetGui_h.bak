//Created by Andrew Olivier on 3/13/2016
//aoliv23@lsu.edu
//\brief: GUI element to handle fhicl parameter set editing
//Inspired by evdb::ButtonBar and ROOT's ali_esd.C example

//ROOT includes
#include "TQObject.h"
#include "RQ_OBJECT.h"
#include "TEveBrowser.h"
#include "TGListTree.h"
#include "TGTextEntry.h"
#include "TGLabel.h"

#ifndef __CINT__

//Framework (ART) includes
#include "art/Framework/Services/UserInteraction/UserInteraction.h"

#endif

//nutools includes
#include "EventDisplayBase/ParameterSetEdit.h"

#ifndef EVED_EVEPSETGUI
#define EVED_EVEPSETGUI

class TGMainFrame;
//class TGCompositeFrame;
class TGHorizontalFrame;
class TGListTree;
class TGTextEntry;
class TGLabel;

namespace eved
{
  class EvePSetGui;
}

class eved::EvePSetGui: public TObject
{
  RQ_OBJECT("eved::EvePSetGui") //needed for ROOT to recognize that this object can interact with GUI buttons
  
  public:
#ifndef __CINT__
    EvePSetGui(TEveBrowser* browse, std::vector<ui::UserInteraction::ModuleInfo> const & modules); //module list needed for list tree construction
#endif
    virtual ~EvePSetGui();

  public:
#ifndef __CINT__
    void Update(std::vector<ui::UserInteraction::ModuleInfo> const & modules); //pass in module information for pset updates
#endif
    void Clicked(TGListTreeItem* item, Int_t i); //response to click on list tree item

  private:
    //GUI elements from ROOT
    TGHorizontalFrame* fButtonBar;
    TGListTree* fListTree;    
    TGTextEntry* fParamText;
    TGLabel* fParamLabel;

#ifndef __CINT__
    void AddTreeItem(TGListTreeItemStd* parent, std::string name, fhicl::ParameterSet p);
    fhicl::ParameterSet GetPSet(std::string name); //put psets back together
#endif

  ClassDef(EvePSetGui, 0); //Needed for ROOT to recognize this class
};

#endif
